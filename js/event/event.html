<!--

https://learn.javascript.ru/introduction-browser-events
https://learn.javascript.ru/dispatch-events
https://developer.mozilla.org/ru/docs/Web/API/Event

-->
<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="utf-8">
</head>

<body>
  <div id="content-holder"></div>
  <div id="square" style="width: 100px; height: 100px; background-color: red;"></div>

  <script type="text/javascript">
    var click_on_red = new Event('click_on_red')
    var click_on_red_handler = function(event) {
      console.log('Red Click!!!')
    }

    var square = document.getElementById('square')

    var click_handler = function(event) {
      if (event.target.style.backgroundColor == 'red') {
        event.target.style.backgroundColor = 'green'
        event.target.dispatchEvent(window.click_on_red)
      } else {
        event.target.style.backgroundColor = 'red'
      }
    }
    square.addEventListener('click', click_handler)

    if (window.square.style.backgroundColor == 'red') {
      square.addEventListener('click_on_red', window.click_on_red_handler)
    } else {
      square.removeEventListener('click_on_red', window.click_on_red_handler)
    }
  </script>
</body>

</html>