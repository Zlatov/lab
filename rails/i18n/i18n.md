# Интернационализация

## Настраиваем

В файле `config/application.rb` указываем `config.i18n.default_locale = :ru` язык по умолчанию.
А еще можно добавить обзор подпапок: `config.i18n.load_path += Dir[Rails.root.join('config', 'locales', '**', '*.{rb,yml}')]`.
Есть хороший гем собирающий i18n всех языков rails-i18n.

## Модель

Для интернационализации модель должна быть расширена `ActiveModel::Translation` или унаследована от ActiveRecord

```
class Form::Order
  extend ActiveModel::Translation
```

Теперь наполняем файлы интернационализации так:


```
ru:
  hello: "Привет"
  activerecord:
    attributes:
      form/order:
        name: "Имя"
        email: "Email"
        phonenumber: "Номер телефона"
```

или (идентично)

```
  activemodel:
    attributes:
      form/order:
        name: "asd Имя"
        email: "asd Email"
        phonenumber: "asd Номер телефона"
```

или (переназначит)

```
  helpers:
    label:
      form/order:
        name: 'Customized title'
```

Часто используемые поля (name, email, …) можно вынести и не дублировать:

```
ru:
  # Переводы атрибутов всех моделей
  attributes:
    name: "Имя"
    email: "Email"
    phonenumber: "Номер телефона"
```

__Используем Вручную__

`<%= @order.class.human_attribute_name :name %>`

__Используем формой автоматически__

`<%= f.label :name %>`

### Интернационализация enum полей модели

```
  enum payment_type: [:cash, :cashless]
```

Добавим в базовый класс (для всех моделей) или в текущий класс метод

```
  def self.human_enum_name(enum_name, enum_value)
    I18n.t("activerecord.attributes.#{model_name.i18n_key}.#{enum_name.to_s.pluralize}.#{enum_value}")
  end
```

Настройки интернационализации:

```
  activerecord:
    attributes:
      market/model/order:
        payment_types:
          cash: "Наличными"
          cashless: "Безналичный"
```

__Использование__

```
Market::Model::Order.human_enum_name(:payment_type, order.payment_type.to_sym)
```

## Фразы

Для простого превода фразы достаточно `<%= ::I18n.t :hello %>`

## Интернационализация Даты

[см файл _rails/datetime/date.md_](../datetime/date.md)
