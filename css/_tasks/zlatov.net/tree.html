<header>
    <link rel="stylesheet" type="text/css" href="tree.css">
    <script type="text/javascript" src="../../../node_modules/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="tree.js"></script>
</header>

<h2>Древовидный список</h2>

<p>Древовидный список можно создать с помощью маркированных списков вложенных друг в друга, но такой список будет недостаточно наглядным для читателя:</p>

<ul>
    <li>Древовидный список;
        <ul>
            <li>У каждого элемента списка есть родитель, кроме элементов первого уровня;</li>
            <li>Каждый следующий уровень вложенности смещается внутрь на фиксированное расстояние; </li>
            <li>Наличие соединяющих линий;
                <ul>
                    <li>Все элементы &bdquo;братья&ldquo; должны соединяться линией;</li>
                    <li>Все элементы &bdquo;дети&ldquo; должны соединяться линией с родителем;</li>
                </ul>
            </li>
            <li>Элементы древовидного списка не должны иметь фоновую заливку для возможности отображения списка над любым градиентным фоном;</li>
        </ul>
    </li>
    <li>Раскрывающийся древовидный список;
        <ul>
            <li>Все то же что и у простого древовидного списка;</li>
            <li>Наличие управляющих кнопок &bdquo;плюсиков&ldquo;;
                <ul>
                    <li>Каждый элемент являющийся родителем слева от себя должен иметь управляющую кнопку &bdquo;плюсик&ldquo;;</li>
                    <li>При нажатии на эту кнопку дочерние элементы показываются, а кнопка приобретает вид минуса, при повторном нажатии дочернии элементы скрываются, кнопка приобретает свой первоначальный вид.</li>
                </ul>
            </li>
        </ul>
    </li>
</ul>

<p>В общем, неплохо и понятно, но можно ещё лучше. Исходный код такого списка следующий:</p>
<pre class="prettyprint lang-html">&lt;ul&gt;
    &lt;li&gt;Древовидный список;
        &lt;ul&gt;
            &lt;li&gt;У каждого элемента списка есть родитель, кроме элементов первого уровня;&lt;/li&gt;
            &lt;li&gt;Каждый следующий уровень вложенности смещается внутрь на фиксированное расстояние; &lt;/li&gt;
            &lt;li&gt;Наличие соединяющих линий;
                &lt;ul&gt;
                    &lt;li&gt;Все элементы &amp;bdquo;братья&amp;ldquo; должны соединяться линией;&lt;/li&gt;
                    &lt;li&gt;Все элементы &amp;bdquo;дети&amp;ldquo; должны соединяться линией с родителем;&lt;/li&gt;
                &lt;/ul&gt;
            &lt;/li&gt;
            &lt;li&gt;Элементы древовидного списка не должны иметь фоновую заливку для возможности отображения списка над любым градиентным фоном;&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;Раскрывающийся древовидный список;
        &lt;ul&gt;
            &lt;li&gt;Все то же что и у простого древовидного списка;&lt;/li&gt;
            &lt;li&gt;Наличие управляющих кнопок &amp;bdquo;плюсиков&amp;ldquo;;
                &lt;ul&gt;
                    &lt;li&gt;Каждый элемент являющийся родителем слева от себя должен иметь управляющую кнопку &amp;bdquo;плюсик&amp;ldquo;;&lt;/li&gt;
                    &lt;li&gt;При нажатии на эту кнопку дочерние элементы показываются, а кнопка приобретает вид минуса, при повторном нажатии дочернии элементы скрываются, кнопка приобретает свой первоначальный вид.&lt;/li&gt;
                &lt;/ul&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
    &lt;/li&gt;
&lt;/ul&gt;
</pre>

<p>В этой статье мы рассмотрим только как оформить html код в древовидный список, а если вас интересует как сформировать многоуровневую вложенность HTML-списков с помощью PHP, то вам в соседнюю статью <a href="/publication/vyvod-mnogourovnego-menyu-i-drevovidnogo-spiska-na-php.html">Как с помощью PHP вывести многоуровневое выпадающее меню или древовидный иерархический раскрывающийся список</a>.</p>

<h2>Простой древовидный список</h2>
<p>Преобразуем его в <strong>простой древовидный</strong>, добавив класс <code>ul-treefree</code>:</p>
<pre class="prettyprint lang-css">/* ul-treefree */
ul.ul-treefree { padding-left:25px; }
ul.ul-treefree ul { margin:0; padding-left:6px; }
ul.ul-treefree li { position:relative; list-style:none outside none; border-left:solid 1px #999; margin:0; padding:0 0 0 19px; line-height:23px; }
ul.ul-treefree li:before { content:''; display:block; border-bottom:solid 1px #999; position:absolute; width:18px; height:11px; left:0; top:0; }
ul.ul-treefree li:last-child { border-left:0 none; }
ul.ul-treefree li:last-child:before { border-left:solid 1px #999; }
</pre>

<p>Получаем:</p>

<ul class="ul-treefree">
    <li>Древовидный список;
        <ul>
            <li>У каждого элемента списка есть родитель, кроме элементов первого уровня;</li>
            <li>Каждый следующий уровень вложенности смещается внутрь на фиксированное расстояние; </li>
            <li>Наличие соединяющих линий;
                <ul>
                    <li>Все элементы &bdquo;братья&ldquo; должны соединяться линией;</li>
                    <li>Все элементы &bdquo;дети&ldquo; должны соединяться линией с родителем;</li>
                </ul>
            </li>
            <li>Элементы древовидного списка не должны иметь фоновую заливку для возможности отображения списка над любым градиентным фоном;</li>
        </ul>
    </li>
    <li>Раскрывающийся древовидный список;
        <ul>
            <li>Все то же что и у простого древовидного списка;</li>
            <li>Наличие управляющих кнопок &bdquo;плюсиков&ldquo;;
                <ul>
                    <li>Каждый элемент являющийся родителем слева от себя должен иметь управляющую кнопку &bdquo;плюсик&ldquo;;</li>
                    <li>При нажатии на эту кнопку дочерние элементы показываются, а кнопка приобретает вид минуса, при повторном нажатии дочернии элементы скрываются, кнопка приобретает свой первоначальный вид.</li>
                </ul>
            </li>
        </ul>
    </li>
</ul>
<p><a href="/upload/publication/48/tree-list.html" target="_blanck">Примеры простых и раскрывающихся древовидных списков</a>.</p>

<h2>Простой раскрывающийся древовидный список</h2>


<p>Если этот же список хотим сделать <em>раскрывающимся</em>, то следует добавить ещё класс <code>ul-dropfree</code>.</p> 
<pre class="prettyprint lang-css">/* ul-dropfree */
ul.ul-dropfree div.drop {
width:11px;
height:11px;
position:absolute;
z-index:10;
top:6px;
left:-6px;
background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAALCAIAAAD0nuopAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAE1JREFUeNpinDlzJgNlgAWI09LScEnPmjWLoAImrHpIAkwMFAMqGMGC6X44GzkIsHoQooAFTTVQKdbAwxOigyMsmIh3MC7ASHnqBAgwAD4CGeOiDhXRAAAAAElFTkSuQmCC');
background-position:-11px 0;
background-repeat:no-repeat;
cursor:pointer;
}
</pre>
<p>Этот блочный элемент (<code>&lt;div class="drop">&lt;/div></code>) добавляется с помощью jQuery, и вешается на него событие <code>click</code>, по которому раскрывается или скрывается список дочерних элементов:</p>

<pre class="prettyprint lang-js"> $(".ul-dropfree").find("li:has(ul)").prepend('&lt;div class="drop">&lt/div>');
  $(".ul-dropfree div.drop").click(function() {
    if ($(this).nextAll("ul").css('display')=='none') {
      $(this).nextAll("ul").slideDown(400);
      $(this).css({'background-position':"-11px 0"});
    } else {
      $(this).nextAll("ul").slideUp(400);
      $(this).css({'background-position':"0 0"});
    }
  });
  $(".ul-dropfree").find("ul").slideUp(400).parents("li").children("div.drop").css({'background-position':"0 0"});
</pre>

<p>Пример <a name="treefreedrop" href="/upload/publication/48/tree-list.html#treefreedrop" target="_blanck">простого раскрывающегося древовидного списка</a> с большим количеством узлов.</p>

<p>Посмотрим на моё меню в виде раскрывающегося списка:</p>

<ul class="ul-treefree ul-dropfree">
<li>Программирование
<ul>
<li>PHP
</li>
<li>JavaScript
</li>
<li>MySQL
</li>
<li>htaccess
</li>
<li>regular expression
</li>
</ul>
</li><li>Верстка
<ul>
<li>HTML
</li>
<li>CSS
</li>
</ul>
</li><li>Дизайн
<ul>
<li>Photoshop
</li>
</ul>
</li><li>SEO
</li>
<li>Разное
</li>
</ul>


<h2>Точный древовидный список</h2>
<p>В списках представленных выше есть небольша неточность, для меня она некритична. Сравните с <strong>точным древовидным списком</strong> ниже:</p>


<ul class="ul-tree">
<li><p>Программирование</p>
<ul>
<li><p>PHP</p>
</li>
<li><p>JavaScript</p>
</li>
<li><p>MySQL</p>
</li>
<li><p>htaccess</p>
</li>
<li><p>regular expression</p>
</li>
</ul>
</li><li><p>Верстка</p>
<ul>
<li><p>HTML</p>
</li>
<li><p>CSS</p>
</li>
</ul>
</li><li><p>Дизайн</p>
<ul>
<li><p>Photoshop</p>
</li>
</ul>
</li><li><p>SEO</p>
</li>
<li><p>Разное</p>
</li>
</ul>


<p>Пример <a name="treefon" href="http://www.zlatov.net/upload/publication/48/tree-list.html#treefon">точного древовидного списка</a> на каком-нибудь фоне.</p>

<p>Для того, чтобы у нас получился точный древовидный список необходимо исходный код немного модифицировать, добавив дополнительный тег, например тег &lt;p&gt;&lt;/p&gt;, вокруг каждого текста в элементе списка. Далее, я объясню, для чего этот тег нужен. HTML структура точного древовидного списка следующая:</p>


<pre class="prettyprint lang-html">&lt;ul class=&quot;ul-tree&quot;&gt;
    &lt;li&gt;&lt;p&gt;Древовидный список;&lt;/p&gt;
        &lt;ul&gt;
            &lt;li&gt;&lt;p&gt;У каждого элемента списка есть родитель, кроме элементов первого уровня;&lt;/p&gt;&lt;/li&gt;
            &lt;li&gt;&lt;p&gt;Каждый следующий уровень вложенности смещается внутрь на фиксированное расстояние;&lt;/p&gt;&lt;/li&gt;
            &lt;li&gt;&lt;p&gt;Наличие соединяющих линий;&lt;/p&gt;
                &lt;ul&gt;
                    &lt;li&gt;&lt;p&gt;Все элементы &amp;bdquo;братья&amp;ldquo; должны соединяться линией;&lt;/p&gt;&lt;/li&gt;
                    &lt;li&gt;&lt;p&gt;Все элементы &amp;bdquo;дети&amp;ldquo; должны соединяться линией с родителем;&lt;/p&gt;&lt;/li&gt;
                &lt;/ul&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;p&gt;Элементы древовидного списка не должны иметь фоновую заливку для возможности отображения списка над любым градиентным фоном;&lt;/p&gt;&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;p&gt;Раскрывающийся древовидный список;&lt;/p&gt;
        &lt;ul&gt;
            &lt;li&gt;&lt;p&gt;Все то же что и у простого древовидного списка;&lt;/p&gt;&lt;/li&gt;
            &lt;li&gt;&lt;p&gt;Наличие управляющих кнопок &amp;bdquo;плюсиков&amp;ldquo;;&lt;/p&gt;
                &lt;ul&gt;
                    &lt;li&gt;&lt;p&gt;Каждый элемент являющийся родителем слева от себя должен иметь управляющую кнопку &amp;bdquo;плюсик&amp;ldquo;;&lt;/p&gt;&lt;/li&gt;
                    &lt;li&gt;&lt;p&gt;При нажатии на эту кнопку дочерние элементы показываются, а кнопка приобретает вид минуса, при повторном нажатии дочернии элементы скрываются, кнопка приобретает свой первоначальный вид.&lt;/p&gt;&lt;/li&gt;
                &lt;/ul&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
    &lt;/li&gt;
&lt;/ul&gt;
</pre>

<p>Дополнительный тег &lt;p&gt; необходим для того, чтобы опустить текст ниже элемента списка &lt;li&gt; на половину высоты строки. Таким образом левая вертикальная черта дочерних элементов &lt;li&gt; каснется горизонтальной черты родительского элемента, см рисунок.</p>

<p class="left"><img src="/upload/publication/48/p-nije.png" alt="смещение дополнительного тега вниз в древовидном списке" title="древовидный список смещение дополнительного тега"><span>Дополнительный тег <code>&lt;p&gt;</code> смещен вниз и его горизонтальная черта касается вертикальной черты дочернего <code>&lt;li&gt;</code></span></p>

<p>Линий стало как будто больше, мне не очень нравится, но пусть будет… </p>

<h2>Точный раскрывающийся древовидный список</h2>
<p>Добавляем класс ul-drop, и, вуаля:</p>
<ul class="ul-tree ul-drop">
    <li><p>Древовидный список;</p>
        <ul>
            <li><p>У каждого элемента списка есть родитель, кроме элементов первого уровня;</p></li>
            <li><p>Каждый следующий уровень вложенности смещается внутрь на фиксированное расстояние;</p></li>
            <li><p>Наличие соединяющих линий;</p>
                <ul>
                    <li><p>Все элементы &bdquo;братья&ldquo; должны соединяться линией;</p></li>
                    <li><p>Все элементы &bdquo;дети&ldquo; должны соединяться линией с родителем;</p></li>
                </ul>
            </li>
            <li><p>Элементы древовидного списка не должны иметь фоновую заливку для возможности отображения списка над любым градиентным фоном;</p></li>
        </ul>
    </li>
    <li><p>Раскрывающийся древовидный список;</p>
        <ul>
            <li><p>Все то же что и у простого древовидного списка;</p></li>
            <li><p>Наличие управляющих кнопок &bdquo;плюсиков&ldquo;;</p>
                <ul>
                    <li><p>Каждый элемент являющийся родителем слева от себя должен иметь управляющую кнопку &bdquo;плюсик&ldquo;;</p></li>
                    <li><p>При нажатии на эту кнопку дочерние элементы показываются, а кнопка приобретает вид минуса, при повторном нажатии дочернии элементы скрываются, кнопка приобретает свой первоначальный вид.</p></li>
                </ul>
            </li>
        </ul>
    </li>
</ul>
